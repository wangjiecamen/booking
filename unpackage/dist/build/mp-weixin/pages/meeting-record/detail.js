"use strict";const e=require("../../common/vendor.js");if(!Array){(e.resolveComponent("van-field")+e.resolveComponent("van-cell")+e.resolveComponent("van-cell-group")+e.resolveComponent("van-button"))()}Math||(l+a)();const a=()=>"../../components/uploader.js",l=()=>"../../components/PreviewImage.js",t={__name:"detail",setup(a){const l=e.ref([]),t=e.ref(""),o=e.ref(!1),n=e.ref({date:"",start_time:"",end_time:"",remark:"",user_name:"",user_id:"",room_id:"",room_name:"",branch_id:"",branch_name:"",doc_url:""});e.onLoad((async a=>{e.index.setNavigationBarTitle({title:a.id?"会议详情":"新增会议"}),a.id?(o.value="detail"===a.type,n.value._id=a.id,await i(),u(),a.start_time&&(n.value.start_time=a.start_time),a.end_time&&(n.value.end_time=a.end_time)):n.value=JSON.parse(decodeURIComponent(a.form))}));const u=async()=>{const{data:a}=await e.Ls.importObject("booking").getQRCode({id:n.value._id});t.value="data:image/png;base64,"+a},i=async()=>{const{data:a}=await e.Ls.importObject("booking").getItem({id:n.value._id});n.value=a,a.doc_url&&(l.value=[a.doc_url]),console.log(l.value)},r=async()=>{await e.Ls.importObject("booking").auditItem({status:3,id:n.value._id}),e.index.navigateBack()},d=async()=>{l.value.length?n.value.doc_url=l.value[0]:n.value.doc_url="",console.log(n.value),n.value._id?await e.Ls.importObject("booking").updateItem(n.value):await e.Ls.importObject("booking").addItem(n.value),e.index.navigateBack()};return e.onShareAppMessage((()=>({title:"会议室",path:`/pages/meeting-record/detail?id=${n.value._id}&type=detail`}))),(a,u)=>e.e({a:e.p({readonly:!0,label:"日期",value:n.value.date}),b:e.p({readonly:!0,label:"开始时间",value:n.value.start_time}),c:e.p({readonly:!0,label:"结束时间",value:n.value.end_time}),d:e.p({readonly:!0,label:"发起人",value:n.value.user_name}),e:e.p({readonly:!0,label:"发起部门",value:n.value.branch_name}),f:e.p({readonly:!0,label:"预订会议室",value:n.value.room_name}),g:e.p({readonly:!0,label:"是否需要审核",value:1===n.value.audit?"需要":"不需要"}),h:e.o((e=>n.value.remark=e.detail)),i:e.p({placeholder:"请输入",label:" 备注",value:n.value.remark,type:"textarea"}),j:n.value._id},n.value._id?{k:e.p({url:t.value}),l:e.p({title:"二维码"})}:{},{m:e.p({max:1,"file-list":l.value,readonly:o.value}),n:e.p({title:"会议纪要"}),o:e.p({title:"签到人数",value:n.value.sign_num}),p:!o.value},o.value?{}:e.e({q:e.o(d),r:e.p({block:!0,round:!0,color:"#2196f3"}),s:0===n.value.status||1===n.value.status},0===n.value.status||1===n.value.status?{t:e.o(r),v:e.p({block:!0,round:!0})}:{}))}},o=e._export_sfc(t,[["__scopeId","data-v-87395c5a"]]);t.__runtimeHooks=2,wx.createPage(o);
